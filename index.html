<!doctype html>
<html lang="ta">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kishanth Crackers ‚Äî Price List & Order</title>
<meta name="description" content="Kishanth Crackers ‚Äî Wholesale & Retail. Order on WhatsApp. Red & Yellow theme." />
<style>
  /* ========== ROOT THEME ========== */
  :root{
    --bg:#fff8ef;
    --card:#ffffff;
    --muted:#7a7a7a;
    --accent-red:#ff3b2f;
    --accent-yellow:#ffd24d;
    --accent-orange:#ff8c42;
    --accent-green:#25d366;
    --shadow: 0 6px 18px rgba(0,0,0,0.08);
    --radius:14px;
    --section-radius:10px;
    --max-width:900px;
  }
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Helvetica Neue", Arial, sans-serif;
    background:linear-gradient(180deg,#fffaf2,#fff8ef);
    color:#222;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* container */
  .wrap{max-width:var(--max-width);margin:18px auto;padding:10px;}

  /* header */
  header{
    background:linear-gradient(90deg,var(--accent-red),#ff9a2e 60%,var(--accent-yellow));
    color:#fff;padding:22px;border-radius:14px;box-shadow:var(--shadow);
    display:flex;flex-direction:column;gap:10px;align-items:center;
  }
  header h1{margin:0;font-size:28px;letter-spacing:2px}
  header p{margin:0;font-size:13px;font-weight:600;color:rgba(255,255,255,0.95)}

  /* order box (cart summary) */
  .order-box{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow);margin:14px 0;display:flex;gap:12px;align-items:center;justify-content:space-between;}
  .order-left{font-size:14px;color:var(--muted)}
  .order-total{font-weight:800;color:var(--accent-green);font-size:18px}
  .btn-whatsapp{background:var(--accent-green);color:#fff;padding:10px 16px;border-radius:10px;font-weight:700;text-decoration:none;display:inline-block;}
  .btn-upi{background:#0b1b4a;color:#fff;padding:8px 12px;border-radius:10px;font-weight:700;text-decoration:none}

  /* search + categories */
  .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:14px 0;}
  .search{flex:1;min-width:180px}
  input.search-field{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #eee;box-shadow:inset 0 1px 0 rgba(0,0,0,0.02)}
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{background:#fff;padding:8px 12px;border-radius:999px;border:1px solid #f0e6d6;box-shadow:0 6px 20px rgba(255,200,50,0.05);cursor:pointer}
  .chip.active{box-shadow:0 8px 20px rgba(0,0,0,0.08);outline:2px solid #fff3cf}

  /* section header */
  .section-head{display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;margin:18px 0;font-weight:800}
  .section-title{flex:1;font-size:18px}
  .section-badge{width:10px;height:40px;border-radius:6px;margin-left:6px}

  /* product card */
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px}
  .card h3{margin:0;font-size:17px}
  .meta{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .price{font-weight:800;color:var(--accent-green)}
  .small{font-size:13px;color:var(--muted)}

  /* cart controls */
  .controls-row{display:flex;gap:8px;align-items:center}
  .qty-btn{border:1px solid #ddd;background:#fff;padding:6px 10px;border-radius:8px;cursor:pointer}
  .qty-display{min-width:34px;text-align:center;font-weight:700}
  .add-btn{background:var(--accent-red);color:#fff;padding:8px 10px;border-radius:8px;border:none;cursor:pointer}

  /* footer */
  footer{margin:28px 0;text-align:center;color:#444;font-size:13px}

  /* colors per category */
  .c-flower{background:linear-gradient(90deg,#fff9e6,#fff2c8);border-left:6px solid #ffd24d}
  .c-chakkar{background:linear-gradient(90deg,#fff1f0,#ffe4e1);border-left:6px solid #ff3b2f}
  .c-sound{background:linear-gradient(90deg,#fff6ec,#fff1e6);border-left:6px solid #ff8c42}
  .c-bigili{background:linear-gradient(90deg,#fffaf2,#f2fff6);border-left:6px solid #00b894}
  .c-atom{background:linear-gradient(90deg,#fff1fb,#fbe7ff);border-left:6px solid #9b59b6}
  .c-rocket{background:linear-gradient(90deg,#f3fff6,#e6fff1);border-left:6px solid #00a8ff}
  .c-kids{background:linear-gradient(90deg,#fbfff6,#f2fff2);border-left:6px solid #ff9f43}
  .c-fancyf{background:linear-gradient(90deg,#fff5f8,#fff0f3);border-left:6px solid #ff6b6b}
  .c-sky{background:linear-gradient(90deg,#f6f9ff,#eef6ff);border-left:6px solid #2e86de}
  .c-whistle{background:linear-gradient(90deg,#fffbf0,#fff6e6);border-left:6px solid #f39c12}
  .c-sparklers{background:linear-gradient(90deg,#fffaf2,#fff8ef);border-left:6px solid #ffd24d}
  .c-default{background:linear-gradient(90deg,#fff,#fbfbfb);border-left:6px solid #ddd}

  /* sticky mobile cart button */
  .cart-sticky{position:fixed;right:14px;bottom:18px;background:#fff;padding:8px 12px;border-radius:30px;box-shadow:0 8px 20px rgba(0,0,0,0.12);display:flex;gap:10px;align-items:center;z-index:999}
  .cart-sticky .cart-btn{background:#ff4b4b;color:#fff;padding:8px 12px;border-radius:10px;font-weight:800;border:none;cursor:pointer}

  /* responsive */
  @media(min-width:720px){
    .grid{grid-template-columns:1fr 1fr}
    header{flex-direction:row;justify-content:space-between;align-items:center}
    .controls{gap:16px}
    .wrap{padding:20px}
    .cart-sticky{right:28px;bottom:26px}
  }
</style>
</head>
<body>
  <div class="wrap">

    <!-- HEADER -->
    <header>
      <div>
        <h1>üî• KISHANTH CRACKERS üî•</h1>
        <p>Vembakottai ‚Ä¢ Wholesale & Retail ‚Ä¢ Since 2025</p>
      </div>

      <!-- UPI / WhatsApp in header -->
      <div style="display:flex;gap:10px;align-items:center">
        <div class="small" style="color:#fff;font-weight:700">Order Online ‚Ä¢ WhatsApp: <span id="wa-num">7448489142</span></div>
        <div style="background:rgba(0,0,0,0.12);padding:6px 8px;border-radius:8px;color:#fff;font-weight:700">GPay: <span id="upi-id">suganthiraj9598-1@okaxis</span></div>
      </div>
    </header>

    <!-- ORDER SUMMARY -->
    <div class="order-box" role="status" aria-live="polite">
      <div>
        <div class="order-left">Total<br/><span class="order-total" id="cart-amount">‚Çπ0</span></div>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <a id="whatsapp-btn" class="btn-whatsapp" href="#" target="_blank">üì± Order on WhatsApp ‚Äî Chat Now</a>
        <div class="btn-upi">GPay / UPI: <strong id="upi-mini">suganthiraj9598-1@okaxis</strong></div>
      </div>
    </div>

    <!-- SEARCH + FILTERS -->
    <div class="controls">
      <div class="search">
        <input id="search" class="search-field" placeholder="Search products (e.g. Lakshmi, Flower, Rocket...)" />
      </div>
      <div class="chips" id="filters">
        <!-- chips injected -->
      </div>
    </div>

    <!-- PRODUCTS CONTAINER -->
    <div id="listing">
      <!-- Listing injected by JS -->
    </div>

    <!-- FOOTER -->
    <footer>
      <div>Owner: Prashanth ‚Ä¢ WhatsApp: <strong>7448489142</strong> ‚Ä¢ Address: 3/61, South Street, Vembakottai</div>
      <div style="margin-top:6px;color:#888;font-size:12px">¬© 2025 Kishanth Crackers</div>
    </footer>
  </div>

  <!-- STICKY CART -->
  <div class="cart-sticky" id="cart-sticky">
    <div id="cart-summary">Items: 0 | ‚Çπ0</div>
    <button class="cart-btn" id="checkout-btn">Cart</button>
  </div>

<script>
/*
  Kishanth Crackers ‚Äî Single-file site
  - 100 products (data below)
  - Category colors & sections
  - Cart (local in browser)
  - WhatsApp order message generator
  - Admin simple price-edit (localStorage)
*/

/* ====== SITE CONFIG ====== */
const CONFIG = {
  waNumber: '917448489142', // with country code for wa.me
  waPlain: '7448489142', // display
  upi: 'suganthiraj9598-1@okaxis',
  minOrderRequired: false // user asked to remove minimum order
};

/* ====== CATEGORIES (ordered) ====== */
const CATEGORIES = [
  {id:'Flower Pots', key:'flower', cls:'c-flower'},
  {id:'Ground Chakkar', key:'chakkar', cls:'c-chakkar'},
  {id:'Sound Crackers', key:'sound', cls:'c-sound'},
  {id:'Bigili & Bulk Sound', key:'bigili', cls:'c-bigili'},
  {id:'Atom Bomb', key:'atom', cls:'c-atom'},
  {id:'Rockets', key:'rocket', cls:'c-rocket'},
  {id:'Kids Fancy Novelties', key:'kids', cls:'c-kids'},
  {id:'Fancy Fountains', key:'fancyf', cls:'c-fancyf'},
  {id:'Sky Shot (Single)', key:'sky', cls:'c-sky'},
  {id:'Whistling Series', key:'whistle', cls:'c-whistle'},
  {id:'Branded Sparklers', key:'sparklers', cls:'c-sparklers'},
  {id:'Pipe Series', key:'pipe', cls:'c-default'}
];

/* ====== PRODUCTS: 100 items.
   For pipe series and dynamic-rate items, price is set to null -> shows "Check WhatsApp"
   For some known items use prices (from earlier screenshots).
*/
let products = [
  // 1-6 Flower Pots
  {id:1,name:"Flower Pots Big",cat:"flower",price:280,offer:70},
  {id:2,name:"Flower Pots Special",cat:"flower",price:360,offer:90},
  {id:3,name:"Flower Pots Asoka",cat:"flower",price:520,offer:130},
  {id:4,name:"Flower Pots Deluxe (5pcs)",cat:"flower",price:640,offer:160},
  {id:5,name:"Flower Pots Color Koti",cat:"flower",price:720,offer:180},
  {id:6,name:"Flower Pots Mega Tri Color",cat:"flower",price:1960,offer:490},

  // 7-13 Ground Chakkar
  {id:7,name:"Ground Chakkar Big (10pcs)",cat:"chakkar",price:136,offer:34},
  {id:8,name:"Ground Chakkar Asoka",cat:"chakkar",price:236,offer:59},
  {id:9,name:"Ground Chakkar Special",cat:"chakkar",price:340,offer:85},
  {id:10,name:"Ground Chakkar Deluxe",cat:"chakkar",price:540,offer:135},
  {id:11,name:"Giant Triple Wheel",cat:"chakkar",price:600,offer:150},
  {id:12,name:"Spinner Mega Deluxe",cat:"chakkar",price:676,offer:169},
  {id:13,name:"Multi Color Spinner (5pcs)",cat:"chakkar",price:880,offer:220},

  // 14-20 Sound Crackers
  {id:14,name:"2¬æ\" Kuruvi",cat:"sound",price:36,offer:9},
  {id:15,name:"3¬Ω\" Lakshmi",cat:"sound",price:60,offer:15},
  {id:16,name:"4\" Lakshmi",cat:"sound",price:80,offer:20},
  {id:17,name:"4\" Gold Lakshmi",cat:"sound",price:120,offer:30},
  {id:18,name:"4\" Deluxe Lakshmi",cat:"sound",price:132,offer:33},
  {id:19,name:"2 Sound Crackers",cat:"sound",price:96,offer:24},
  {id:20,name:"3 Sound Crackers",cat:"sound",price:124,offer:31},

  // 21-26 Bigili & Bulk Sound
  {id:21,name:"Bigili Cracker Stripped 100pcs",cat:"bigili",price:192,offer:48},
  {id:22,name:"Bigili Cracker Stripped 50pcs",cat:"bigili",price:80,offer:20},
  {id:23,name:"Bigili Cracker Red 100pcs",cat:"bigili",price:180,offer:45},
  {id:24,name:"Bigili Cracker Red 50pcs",cat:"bigili",price:72,offer:18},
  {id:25,name:"Basket Bomb (Olla vedi) 100pcs",cat:"bigili",price:240,offer:60},
  {id:26,name:"Paper Bomb ¬º kg",cat:"bigili",price:220,offer:55},

  // 27-31 Atom Bomb
  {id:27,name:"Bullet Bomb",cat:"atom",price:120,offer:30},
  {id:28,name:"Mega Bullet",cat:"atom",price:280,offer:70},
  {id:29,name:"Hydro Bomb Green",cat:"atom",price:320,offer:80},
  {id:30,name:"Classic Bomb Green",cat:"atom",price:440,offer:110},
  {id:31,name:"Jallikattu 9\" Ply Bomb",cat:"atom",price:760,offer:190},

  // 32-33 Rockets
  {id:32,name:"Rocket Bomb (10pcs)",cat:"rocket",price:600,offer:60},
  {id:33,name:"Mini Sky shot (Black & White)",cat:"rocket",price:1900,offer:190},

  // 34-54 Kids Fancy Novelties (partial list)
  {id:34,name:"Money in the Bank (3pcs)",cat:"kids",price:1200,offer:120},
  {id:35,name:"Magizh Heist (Money Bank) 2pcs",cat:"kids",price:1800,offer:180},
  {id:36,name:"Electric Stone (kids)",cat:"kids",price:28,offer:7},
  {id:37,name:"Jee Boom Baa",cat:"kids",price:28,offer:7},
  {id:38,name:"Chota Fancy Sky shot",cat:"kids",price:80,offer:20},
  {id:39,name:"Chota Kids Fountain Rich Gold flower (5pcs)",cat:"kids",price:96,offer:24},
  {id:40,name:"Feather Pops Shower (5pcs)",cat:"kids",price:192,offer:48},
  {id:41,name:"Disco Shower Multi Colour (5pcs)",cat:"kids",price:340,offer:85},
  {id:42,name:"Spinning Bambaram (10pcs)",cat:"kids",price:360,offer:90},
  {id:43,name:"Space Rider Sky shot (5pcs)",cat:"kids",price:352,offer:88},
  {id:44,name:"Photo Flash",cat:"kids",price:240,offer:60},
  {id:45,name:"Peacock Wonder drops Fountain (5pcs)",cat:"kids",price:320,offer:80},
  {id:46,name:"Mini Gold Shower (5pcs)",cat:"kids",price:280,offer:70},
  {id:47,name:"4' feet Twinkling Star",cat:"kids",price:280,offer:70},
  {id:48,name:"Dancing Butterfly (10pcs)",cat:"kids",price:320,offer:80},
  {id:49,name:"Helicopter (5pcs)",cat:"kids",price:360,offer:90},
  {id:50,name:"Drone (5pcs)",cat:"kids",price:360,offer:90},
  {id:51,name:"Kit kat",cat:"kids",price:80,offer:20},
  {id:52,name:"Selfie Stick (New Arrival)",cat:"kids",price:440,offer:100},
  {id:53,name:"Top Gun Shower (5pcs)",cat:"kids",price:920,offer:230},
  {id:54,name:"4*4 Fountain wheel (5pcs)",cat:"kids",price:600,offer:150},

  // 55-63 Fancy Fountains
  {id:55,name:"Peacock Fountain",cat:"fancyf",price:560,offer:140},
  {id:56,name:"Bada Peacock",cat:"fancyf",price:1720,offer:430},
  {id:57,name:"Mini Silver Fountain",cat:"fancyf",price:520,offer:130},
  {id:58,name:"Dual Function Fountain (New)",cat:"fancyf",price:680,offer:170},
  {id:59,name:"Welcome Shower (Multi Color)",cat:"fancyf",price:584,offer:146},
  {id:60,name:"TalkingTom (Fancy Shower)",cat:"fancyf",price:720,offer:180},
  {id:61,name:"Popcorn (Crackling shower)",cat:"fancyf",price:760,offer:190},
  {id:62,name:"Water Queen",cat:"fancyf",price:600,offer:150},
  {id:63,name:"Flora Cone Fountain",cat:"fancyf",price:440,offer:110},

  // 64-75 Sky shots (single / repeating)
  {id:64,name:"1 inch Bingo Chota Sky shot (5in1) - 5pcs",cat:"sky",price:640,offer:160},
  {id:65,name:"Penta Flash Sky shot 5pcs",cat:"sky",price:880,offer:220},
  {id:66,name:"2 inch sky shot (1pcs) 5 variant",cat:"sky",price:480,offer:120},
  {id:67,name:"2 inch (3pcs) Multi color Skyshot",cat:"sky",price:795,offer:265},
  {id:68,name:"2 1/2 (2pcs) Multi color Skyshot",cat:"sky",price:1160,offer:290},
  {id:69,name:"2 3/4 inch Branded (3pcs) Multi color Skyshot",cat:"sky",price:1240,offer:310},
  {id:70,name:"3 inch (1pcs) Multi color Skyshot",cat:"sky",price:880,offer:220},
  {id:71,name:"3 1/2 inch Multi color Skyshot (5 variant)",cat:"sky",price:1120,offer:280},
  {id:72,name:"4 inch Golden Niagara falls Sky shot",cat:"sky",price:1160,offer:290},
  {id:73,name:"4 inch Multicolor Sky shot",cat:"sky",price:1320,offer:330},
  {id:74,name:"4 inch Branded Multicolor Sky shot (2pcs)",cat:"sky",price:3200,offer:800},
  {id:75,name:"4 inch Multicolor Sky shot (2 variant) (2pcs)",cat:"sky",price:3000,offer:750},

  // 76-87 Sky shots / Whistling / Branded sparklers
  {id:76,name:"5 inch (Shree Vijay) Multicolor Sky shot (2pcs)",cat:"sky",price:3520,offer:880},
  {id:77,name:"5 inch Special edition (Big shell) (New)",cat:"sky",price:3800,offer:950},
  {id:78,name:"Limited edition Multicolor Sky shot (Pink)",cat:"sky",price:null,offer:null},
  {id:79,name:"Limited edition Multicolor Sky shot (Blue)",cat:"sky",price:null,offer:null},
  {id:80,name:"12shot Riders Crackling",cat:"sky",price:620,offer:155},
  {id:81,name:"12shot Multi Color",cat:"sky",price:600,offer:150},
  {id:82,name:"25shot Multi Color Crackling",cat:"sky",price:1320,offer:330},
  {id:83,name:"30shot Multi Color Shot",cat:"sky",price:1320,offer:330},
  {id:84,name:"60shot Multi Color Shot",cat:"sky",price:2600,offer:650},
  {id:85,name:"120 Shots Multi Color",cat:"sky",price:5200,offer:1300},
  {id:86,name:"240 Shots Multi Color",cat:"sky",price:10400,offer:2600},
  {id:87,name:"Whizz Wheel (Whistling)",cat:"whistle",price:400,offer:100},

  // 88-100 Branded Sparklers & Pipe series & misc
  {id:88,name:"Police Siren (whistle)",cat:"whistle",price:620,offer:155},
  {id:89,name:"Jingle Bells (6 shot whistle)",cat:"whistle",price:640,offer:160},
  {id:90,name:"Arabian Night (12 shot whistle)",cat:"whistle",price:1200,offer:300},
  {id:91,name:"12cm Electric sparklers (box)",cat:"sparklers",price:96,offer:24},
  {id:92,name:"12cm Colour sparklers",cat:"sparklers",price:108,offer:27},
  {id:93,name:"12cm Green sparklers",cat:"sparklers",price:120,offer:30},
  {id:94,name:"12cm Red sparklers",cat:"sparklers",price:136,offer:34},
  {id:95,name:"15cm Electric sparklers (box)",cat:"sparklers",price:152,offer:38},
  {id:96,name:"15cm Colour sparklers",cat:"sparklers",price:168,offer:42},
  {id:97,name:"15cm Green sparklers",cat:"sparklers",price:184,offer:46},
  {id:98,name:"15cm Red sparklers",cat:"sparklers",price:200,offer:50},
  // Pipe series (rates change daily ‚Äî price null)
  {id:99,name:"3 inch Pipe (Rates change daily)",cat:"pipe",price:null,offer:null},
  {id:100,name:"3 Pcs Fancy Pipe (Rates change daily)",cat:"pipe",price:null,offer:null},
  // (If you need 4-inch as item, we can add but kept 100 items exact)
];

/* Admin price edits persisted in localStorage (key: kc_prices) */
function loadEditedPrices(){
  try{
    const raw = localStorage.getItem('kc_prices');
    return raw ? JSON.parse(raw) : {};
  }catch(e){return {}}
}
function saveEditedPrices(obj){
  localStorage.setItem('kc_prices', JSON.stringify(obj));
}
let editedPrices = loadEditedPrices();
products = products.map(p=>{
  if(editedPrices[p.id]!=null) p.price = editedPrices[p.id];
  return p;
});

/* ====== CART ====== */
let CART = {}; // productId -> qty

/* ====== UI HELPERS ====== */
const $ = id => document.getElementById(id);
function money(v){ return v==null ? '‚Äî' : '‚Çπ' + v; }

/* ====== RENDER FILTERS ====== */
function renderFilters(){
  const f = $('filters');
  f.innerHTML = '';
  const all = document.createElement('div');
  all.className='chip active'; all.innerText='All';
  all.onclick = ()=>{ document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active')); all.classList.add('active'); renderListing(); }
  f.appendChild(all);

  CATEGORIES.forEach(cat=>{
    const el = document.createElement('div');
    el.className='chip'; el.innerText = cat.id;
    el.dataset.cat = cat.key;
    el.onclick = ()=>{
      document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
      el.classList.add('active');
      renderListing(cat.key);
    };
    f.appendChild(el);
  });

  // admin chip
  const admin = document.createElement('div');
  admin.className='chip'; admin.innerText='Admin';
  admin.onclick = ()=>{ toggleAdmin(); };
  f.appendChild(admin);
}

/* ====== RENDER LISTING ====== */
function renderListing(filterKey){
  const container = $('listing');
  container.innerHTML = '';
  // group by categories in CATEGORIES order
  CATEGORIES.forEach(cat=>{
    if(filterKey && filterKey !== cat.key) return;
    const catProducts = products.filter(p=>p.cat===cat.key);
    if(catProducts.length===0) return;
    // section header
    const sh = document.createElement('div');
    sh.className = 'section-head ' + cat.cls;
    sh.innerHTML = `<div class="section-title">${cat.id}</div><div class="section-badge" style="background:transparent"></div>`;
    container.appendChild(sh);

    // grid
    const grid = document.createElement('div'); grid.className='grid';
    catProducts.forEach(p=>{
      const card = document.createElement('div'); card.className='card ' + (cat.cls);
      // name
      const h = document.createElement('h3'); h.innerText = p.name;
      card.appendChild(h);

      // meta row
      const meta = document.createElement('div'); meta.className='meta';
      const left = document.createElement('div'); left.className='small';
      left.innerHTML = p.price==null ? `<em>Check Price on WhatsApp</em>` : `Offer: <span style="color:var(--accent-green);font-weight:800">${money(p.offer || p.price)}</span>`;

      const right = document.createElement('div'); right.style.display='flex'; right.style.gap='8px'; right.style.alignItems='center';
      const priceEl = document.createElement('div'); priceEl.className='price';
      priceEl.innerText = p.price==null ? 'Check Price' : money(p.price);
      right.appendChild(priceEl);

      // qty controls
      const ctrl = document.createElement('div'); ctrl.className='controls-row';
      const minus = document.createElement('button'); minus.className='qty-btn'; minus.innerText='-';
      const qty = document.createElement('div'); qty.className='qty-display'; qty.innerText = CART[p.id] || 0;
      const plus = document.createElement('button'); plus.className='qty-btn'; plus.innerText='+';
      minus.onclick = ()=> changeQty(p.id, -1, qty, priceEl);
      plus.onclick = ()=> changeQty(p.id, +1, qty, priceEl);

      ctrl.appendChild(minus); ctrl.appendChild(qty); ctrl.appendChild(plus);

      // add cart only if price known
      const addBtn = document.createElement('button'); addBtn.className='add-btn'; addBtn.innerText='Add';
      addBtn.onclick = ()=>{
        if(p.price==null){ alert('‡Æá‡Æ©‡Æø‡ÆÆ‡Øá‡Æ≤‡Øç ‡Æá‡Æ™‡Øç‡Æ™(product) price daily change ‡ÆÜ‡Æï‡ØÅ‡ÆÆ‡Øç. WhatsApp-‡Æ≤‡Øç enquire ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.'); return; }
        changeQty(p.id, 1, qty, priceEl);
      };

      right.appendChild(ctrl);
      right.appendChild(addBtn);

      meta.appendChild(left); meta.appendChild(right);
      card.appendChild(meta);

      // admin edit UI (hidden by default)
      const adminRow = document.createElement('div'); adminRow.style.marginTop='8px';
      adminRow.className='admin-row';
      adminRow.style.display = isAdmin ? 'block' : 'none';
      adminRow.innerHTML = `<small style="color:#666">Admin ‚Äî Set Price: </small>`;
      const input = document.createElement('input');
      input.type='number'; input.min=0; input.style.marginLeft='8px'; input.value = p.price==null ? '' : p.price;
      const saveBtn = document.createElement('button'); saveBtn.className='qty-btn'; saveBtn.innerText='Save';
      saveBtn.onclick = ()=>{
        const v = input.value.trim();
        const newPrice = v==='' ? null : Number(v);
        // update in products and persist
        p.price = newPrice;
        if(newPrice==null) {
          delete editedPrices[p.id];
        } else editedPrices[p.id] = newPrice;
        saveEditedPrices(editedPrices);
        renderListing(filterKey);
        updateCartDisplay();
      };
      adminRow.appendChild(input); adminRow.appendChild(saveBtn);
      card.appendChild(adminRow);

      grid.appendChild(card);
    });
    container.appendChild(grid);
  });
}

/* ====== CART FUNCTIONS ====== */
function changeQty(id, delta, qtyEl, priceEl){
  const product = products.find(p=>p.id===id);
  if(!product) return;
  if(product.price==null && delta>0){ alert('‡Æá‡Æµ‡Øç‡Æµ‡Øä‡Æ∞‡ØÅ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ current price ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà. WhatsApp-‡Æ≤‡Øç enquire ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.'); return; }
  const curr = CART[id] || 0;
  let next = curr + delta;
  if(next < 0) next = 0;
  if(next === 0) delete CART[id]; else CART[id] = next;
  // update qty display in all cards
  document.querySelectorAll('.qty-display').forEach(el=>{
    const cnode = el;
    // find nearest card h3 and match by name (simple)
  });
  // quick update for passed element
  if(qtyEl) qtyEl.innerText = CART[id] || 0;
  updateCartDisplay();
}

function updateCartDisplay(){
  // total items and amount
  let itemCount = 0, total = 0;
  for(const pid in CART){
    const p = products.find(x=>x.id==pid);
    if(!p || p.price==null) continue;
    itemCount += CART[pid];
    total += CART[pid]* (p.price || 0);
  }
  $('cart-summary').innerText = `Items: ${itemCount} | ‚Çπ${total}`;
  $('cart-amount').innerText = `‚Çπ${total}`;
  $('cart-sticky').style.display = 'flex';
  // update WhatsApp link with message
  const waMsg = generateWhatsAppMessage();
  const waLink = `https://wa.me/${CONFIG.waNumber}?text=${encodeURIComponent(waMsg)}`;
  $('whatsapp-btn').href = waLink;
  // also update checkout button
  $('checkout-btn').onclick = ()=> { window.open(waLink,'_blank'); };
  // reflect qtys in listing qty displays
  document.querySelectorAll('.card').forEach(card=>{
    const title = card.querySelector('h3')?.innerText || '';
    const prod = products.find(p => p.name === title);
    if(prod){
      const qels = card.querySelectorAll('.qty-display');
      qels.forEach(qel => qel.innerText = CART[prod.id] || 0);
    }
  });
}

/* Build WA message from cart */
function generateWhatsAppMessage(){
  let lines = [];
  lines.push('Hello, I want to place an order from Kishanth Crackers.');
  lines.push('WhatsApp: '+CONFIG.waPlain);
  lines.push('--- Order details ---');
  let total = 0, items=0;
  for(const pid in CART){
    const p = products.find(x=>x.id==pid);
    if(!p) continue;
    const qty = CART[pid];
    items += qty;
    const priceText = p.price==null ? 'Price on request' : `‚Çπ${p.price}`;
    lines.push(`${p.name} ‚Äî ${qty} x ${priceText}`);
    if(p.price) total += qty * p.price;
  }
  lines.push('Total Items: '+items);
  lines.push('Estimated Total: ‚Çπ' + total);
  lines.push('');
  lines.push('Delivery details: (Please add name, address & preferred time)');
  return lines.join('\n');
}

/* ====== SEARCH + FILTER HOOKS ====== */
$('search').addEventListener('input', (e)=>{
  const q = e.target.value.trim().toLowerCase();
  // filter by search across name
  if(q===''){ renderListing(); return; }
  const matched = products.filter(p => p.name.toLowerCase().includes(q));
  // build a temporary listing UI
  const container = $('listing'); container.innerHTML = '';
  if(matched.length===0){ container.innerHTML = '<p style="color:#666">No products found.</p>'; return;}
  const grid = document.createElement('div'); grid.className='grid';
  matched.forEach(p=>{
    const cat = CATEGORIES.find(c=>c.key===p.cat);
    const card = document.createElement('div'); card.className='card ' + (cat?cat.cls:'c-default');
    card.innerHTML = `<h3>${p.name}</h3>
      <div class="meta">
        <div class="small">${p.price==null?'<em>Check Price on WhatsApp</em>':'Offer: <span style="color:var(--accent-green);font-weight:800">'+(p.offer? '‚Çπ'+p.offer : '‚Äî')+'</span>'}</div>
        <div style="display:flex;gap:8px;align-items:center"><div class="price">${p.price==null?'Check Price':'‚Çπ'+p.price}</div></div>
      </div>`;
    grid.appendChild(card);
  });
  container.appendChild(grid);
});

/* ====== ADMIN TOGGLE ====== */
let isAdmin = false;
function toggleAdmin(){
  isAdmin = !isAdmin;
  document.querySelectorAll('.admin-row').forEach(r=> r.style.display = isAdmin ? 'block' : 'none');
  alert('Admin mode: ' + (isAdmin? 'ON ‚Äî edit prices on cards. Changes saved locally.' : 'OFF'));
}

/* ====== INIT ====== */
function init(){
  // header wa and upi
  document.getElementById('wa-num').innerText = CONFIG.waPlain;
  document.getElementById('upi-id').innerText = CONFIG.upi;
  document.getElementById('upi-mini').innerText = CONFIG.upi;
  // filters and listing
  renderFilters();
  renderListing();
  updateCartDisplay();
  // hide sticky if empty
  if(Object.keys(CART).length===0) $('cart-sticky').style.display='none';
}
init();

/* Expose admin toggle to global for console use */
window.toggleAdmin = toggleAdmin;

</script>
</body>
</html>
